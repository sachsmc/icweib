library(straweib)
?icweib
data(tooth24)   ## load data
## Stratified on dmf, and sex as explanatory variable
fit <- icweib(L = left, R = right, data = tooth24, strata = dmf, covariates = ~sex)
## weighted
fit
library(survival)
survreg
survreg.fit
rep(1:4, 4)
matrix(rep(1:4, 4), ncol = 4)
source('G:/STAFF/Michael Sachs/R projects/straweib/R/icweib.R')
fit <- icweib(L = left, R = right, data = tooth24, strata = dmf, covariates = ~sex)
source('G:/STAFF/Michael Sachs/R projects/straweib/R/icweib.R')
fit <- icweib(L = left, R = right, data = tooth24, strata = dmf, covariates = ~sex)
fit
tooth24
head(tooth24)
tooth24$wts <- runif(nrow(tooth24))
fit2 <- icweib(L = left, R = right, data = tooth24, strata = dmf, covariates = ~sex, weights = wts)
head(tooth24)
fit2 <- icweib(L = left, R = right, data = tooth24, strata = dmf, covariates = ~sex, weights = wts)
eval(wts, tooth24)
source('G:/STAFF/Michael Sachs/R projects/straweib/R/icweib.R')
fit2 <- icweib(L = left, R = right, data = tooth24, strata = dmf, covariates = ~sex, weights = wts)
fit2 <- icweib(L = left, R = right, data = tooth24, strata = dmf, covariates = ~sex, weights = runif(nrow(tooth24)))
fit2
source('G:/STAFF/Michael Sachs/R projects/straweib/R/icweib.R')
tooth24$wts <- runif(nrow(tooth24))
fit2 <- icweib(L = left, R = right, data = tooth24, strata = dmf, covariates = ~sex, weights = wts)
source('G:/STAFF/Michael Sachs/R projects/straweib/R/icweib.R')
fit2 <- icweib(L = left, R = right, data = tooth24, strata = dmf, covariates = ~sex, weights = wts)
source('G:/STAFF/Michael Sachs/R projects/straweib/R/icweib.R')
fit2 <- icweib(L = left, R = right, data = tooth24, strata = dmf, covariates = ~sex, weights = wts)
source('G:/STAFF/Michael Sachs/R projects/straweib/R/icweib.R')
source('G:/STAFF/Michael Sachs/R projects/straweib/R/icweib.R')
fit2 <- icweib(L = left, R = right, data = tooth24, strata = dmf, covariates = ~sex, weights = wts)
source('G:/STAFF/Michael Sachs/R projects/straweib/R/icweib.R')
fit2
fit3 <- icweib(L = left, R = right, data = tooth24, covariates = ~ sex, weights = wts)
fit3
?survreg
?Surv
survreg(Surv(left, right, type = "interval") ~ sex, weights = tooth24$wts, data = tooth24)
head(tooth24)
tooth24$event <- 3
survreg(Surv(left, right, event, type = "interval") ~ sex, weights = tooth24$wts, data = tooth24)
survreg(Surv(time = left, time2 = right, event, type = "interval") ~ sex, weights = tooth24$wts, data = tooth24)
survreg(Surv(time = left, time2 = right, type = "interval2") ~ sex, weights = tooth24$wts, data = tooth24)
tooth24$right2 <- ifelse(!is.finite(tooth24$right), NA, tooth24$right)
survreg(Surv(time = left, time2 = right2, type = "interval2") ~ sex, weights = tooth24$wts, data = tooth24)
fit3
out1<-fit3
shape1<-1/sum(out1$scale)
scale1<-exp(sum(out1$coefficients)- out1$coefficients[2])
scale2<-exp(sum(out1$coefficients))
H1<-(shape1/scale1)*(168/scale1)^(shape1-1)
H2<-(shape1/scale2)*(168/scale2)^(shape1-1)
H1
H2
fit4 <- survreg(Surv(time = left, time2 = right2, type = "interval2") ~ sex, weights = tooth24$wts, data = tooth24)
out1<-fit4
shape1<-1/sum(out1$scale)
scale1<-exp(sum(out1$coefficients)- out1$coefficients[2])
scale2<-exp(sum(out1$coefficients))
H1<-(shape1/scale1)*(168/scale1)^(shape1-1)
H2<-(shape1/scale2)*(168/scale2)^(shape1-1)
H1
H2
H1 / H2
fit3
H2/H1
exp(.298)
fit3$coef
exp(fit3$coef[1])
plot(fit3)
source('G:/STAFF/Michael Sachs/R projects/straweib/R/icweib.R')
fit3 <- icweib(L = left, R = right, data = tooth24, strata = dmf, covariates = ~ sex, weights = wts)
fit3
H2 / H1
fit3a <- icweib(L = left, R = right, data = tooth24, covariates = ~ sex, weights = wts)
fit3a$coef
H2 / H1 - exp(fit3a$coef[1])
H2 / H1 - exp(fit3a$coef[1]) < 1e-4
library(straweib)
library(straweib)
?icweib
